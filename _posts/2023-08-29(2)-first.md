---
layout: single
title: 스프링 컨테이너와 스프링 빈
---


## 스프링 컨테이너가 생성되는 과정에 대해서 알아보자. 

BeanFactory 와 ApplicationContext 에 대해서 먼저 알아보고 가도록 하자.
ApplicationContext 는 BeanFactory 를 확장하고 있는 IocContainer 라고 할 수 있다. 
이는 인터페이스로 설계가 되어있다. 
아래와 같이 자바의 코드로도 만들 수 있고, XML 을 통해서도 만들 수 있다는 것을 알아두자.

<img width="521" alt="스크린샷 2023-08-29 오전 9 35 50" src="https://github.com/rlaxoehd4234/rlaxoehd4234.github.io/assets/92311926/68384ea3-bc8b-443c-a602-42a81f45e627">

### 스프링 컨테이너 생성 

위 사진의 코드 처럼 스프링 컨테이너를 생성한다. 스프링 컨테이너를 생성할 때는 구성 정보를 지정해주어야 한다. 

스프링 컨테이너는 파라미터로 넘어 온 설정 클래스 정보를 사용해서 스프링 빈을 등록한다. 

빈 이름은 메서드 이름을 사용한다. 여기서 주의할 점은 빈 이름은 항상 다름 이름을 부여해야 한다. 같은 이름을 부여한다면, 다른 빈이 무시되거나, 기존
빈을 덮어버리거나 설정에 따라 오류가 발생한다. 


스프링 컨테이너는 설정 정보를 참고해서 의존간계를 주입한다. 
단순히 자바 코드를 호출하는 것 같지만, 차이가 있다. 이차이는 뒤에 싱글톤 컨테이너에서 설명한다. 

<img width="538" alt="스크린샷 2023-08-29 오전 9 49 03" src="https://github.com/rlaxoehd4234/rlaxoehd4234.github.io/assets/92311926/b16ff798-7875-4152-9e54-86b37bf4b2f3">

스프링은 빈을 생성하고, 의존관계를 주입하는 단계가 나누어져 있다. 
하지만 자바 코드로 스프링 빈을 등록하면 생성자를 호출하면서 의존관계 주입도 한번에 처리된다. 여기서는 이해를 돕기 위해 개념적으로 나누어 설명했다.
자세한 내용은 의존관계 자동 주입에서 다시 설명하겠다. 



스프링 컨테이너를 생성하고, 설정 정보를 참고해서 스프링 빈도 등록하고 의존관계도 설정했다. 이제 스프링 컨테이너에서 데이터를 조회해보자.

스프링 컨테이너를 통해 빈을 등록하고 빈을 타입으로 조회 시 에 같은 타입이 존재하면 오류가 발생한다. 이때는 퀄리파이어나 빈 name 을 따로 설정해주어야 한다. 


부모 타입으로 빈을 조회하면, 자식 타입도 함께 조회가 된다. 그러므로 Object 타입으로 조회하면, 모든 스프링 빈을 조회하게 된다. 



## BeanFactory 와 ApllcationContext 에 대해서 알아보자. 

<img width="290" alt="스크린샷 2023-08-29 오전 10 05 34" src="https://github.com/rlaxoehd4234/rlaxoehd4234.github.io/assets/92311926/339b3d23-7d0f-4db1-aa12-e3ecd22266ff">

### BeanFactory
- 스프링 컨테이너의 최상위 인터페이스다.
- 스프링 빈을 관리하고 조회하는 역할을 담당한다.
- getBean()을 제공한다.
- 지금까지 우리가 사용했던 대부분의 기능은 BeanFactory 가 제공하는 기능이다.

### ApplicationContext 
- BeanFactory 기능을 모두 상속받아서 제공한다.
- 빈을 관리하고 검색하는 기능을 BeanFactory 가 제공해주는데, 그러면 둘의 차이가 뭘까?
- 스프링 컨테이너는 빈을 관리하고 조회하는 기능을 제외하고도, 더 많은 기능들을 필요로 하기 때문에 그 기능들이 확장된 인터페이스가 ApplcationContext 라고 할 수 잇따.

그렇다면 ApplicationContext 는 어떤 기능들을 더 제공할까? 
- 메시지 소스를 활용한 국제화 기능 ( 예를 들어서 한국에서 들어오면 한국어, 영어권에서 들어오면 영어로 출력하게 끔)
- 환경변수(로컬, 개발, 운영 등을 구분해서 처리)
- 어플리케이션 이벤트 (이벤트를 발행하고 구독하는 모델을 편리하게 지원)
- 편리한 리소스 조회 (파일, 클래스 패스, 외부등에서 리소스를 편리하게 조회)


### 그렇다면 xml 설정 파일과, 자바 코드 기반의 빈 설정을 어떻게 할 수 있을까? 정답은 BeanDefinition 에 있다. 

<img width="608" alt="스크린샷 2023-08-29 오전 10 18 16" src="https://github.com/rlaxoehd4234/rlaxoehd4234.github.io/assets/92311926/ef23429f-8b8a-4372-bfd9-3d12f89b5cd3">

스프링은 어떻게 이렇게 다양한 설정 형식을 지원하는 것일까? 
쉽게 이야기해서 역할과 구현을 개념적으로 나눈 것이다! 
다양한 형식으로 들어오는 설정 정보를 읽어서 BeanDefinition 으로 만드는 것이다. 
스프링 컨테이너는 BeanDefinition 만 알면된다. 
<img width="549" alt="스크린샷 2023-08-29 오전 10 20 14" src="https://github.com/rlaxoehd4234/rlaxoehd4234.github.io/assets/92311926/c44d4832-71c9-4be4-ae56-6ee2059347d2">
