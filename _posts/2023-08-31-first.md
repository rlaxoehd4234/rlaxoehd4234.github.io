---
layout: single
title: Spring DI,IoC,AOP, MVC 관련하여
---


## IoC 에 대해서 
우선 DI 를 알기 위해서는 IoC 를 알아야 한다.
IoC 의 구현 방법 중의 하나가 DI(dependency Injection) 이다. 

객체지향 언어에서 Object 간의 연결 관계를 런타임에 결정하는 것이다. 
- 객체 제어 방식
- 기존에는 필요한 위치에 따라서 개발자 필요한 객체 생성 로직을 구현했다.
- IoC 는 객체 생성을 Container 에게 위임하여 처리하게 하는 것이다!
- 이렇게 사용하면 뭐가 좋은가? 객체들 사이의 결합도를 낮출 수 있다. 이를 (loose coupling) 이라 한다.
  
객체간 결합도가 높으면 해당 클래스가 유지보수 될 때 그 클래스와 결합된 다른 클래스도 같이 유지보수 되어야 할 가능성이 높다 .

객체 간의 강한 결합을 다형성을 통해 결합도를 낮춰주게 된다. 이를 위해 사용되는 것이 템플릿 메서드 패턴이다. 
이 개념이 궁금하다면 한 번 찾아보고 정리해보는것도 좋은 방법인거 같다. 

![스크린샷 2023-08-31 오전 10 01 03](https://github.com/rlaxoehd4234/rlaxoehd4234.github.io/assets/92311926/764672cc-3d2e-422c-aefb-05680029eccd)

이는 의존성을 받는 클래스에서 인터페이스를 이용해서 사용하는 것이다. 
여기서 Factory 패턴을 이용해 생성해둔 클래스를 가지고 있는 Factory 를 호출 하는 것이다. type 을 다형성으로 가지고 있고, 호출은 factory 를 통해 하는 것이다.

그러나 클래스에 팩토리를 호출하는 소스가 들어가야 함. 그것 자체가 팩토리에 의존함을 의미한다. 이 factory 패턴이 적용 된 것이 Container의 긴ㅇ이며 이 Container 의 기능을 제공해 주고자 하는 것이 IoC 모듈이다.

Assembler 를 통해서 결합도를 낮춤
IoC 의 호출 방식 
팩토리 패턴의 장점을 더하여 어떠한 것에도 의존하지 않는 형태가 된다. 

![스크린샷 2023-08-31 오전 10 18 01](https://github.com/rlaxoehd4234/rlaxoehd4234.github.io/assets/92311926/d0213a83-f14c-418c-936a-d174740544bc)


IoC 의 유형 중에 하나인 DI 에 대해서 알아보도록 하자. 


## 이를 위해 존재하는 Container 
- 객체의 생성, 사용, 소멸에 해당하는 라이프사이클을 담당한다.
- 라이프 사이클을 기본으로 애플리케이션 사용에 필요한 주요 기능을 제공
- 라이프 사이클을 관리하고, dependency 객체를 제공
- Thread 를 관리한다.
- 기타 애플리케이션 실행에 필요한 환경

이를 왜 사용하는가 ?
- 비즈니스 로직 외에 부가적인 기능들에 대해서는 독립적으로 관리되도록 하기 위함
- 서비스 look up 이나 configuration 에 대한 일관성을 갖기 위함
- 서비스 객체를 사용하기 위해 각각 factory 또는 singleton 패턴을 직접 구현하지 않아도 됨.


### Spring DI Container 
- Spring DI Container 가 관리하는 객체를 빈이라 하고, 이 빈들의 생명주기를 관리하는 의미로 BeanFactory라 한다.
- Bean Factory에 여러 가지 컨테이너 기능을 추가하여 ApplicationContext 라고 한다.
 ![스크린샷 2023-08-31 오전 9 54 10](https://github.com/rlaxoehd4234/rlaxoehd4234.github.io/assets/92311926/534d8bca-cb21-4e15-b4ae-a3bf2cbcffe4)
일반적으로 BeanFactory 보다는 이를 확장 Application Context 를 사용한다.

getBean() method 가 정의되어 있음 


## DI 란 무엇인가? 
일단 용어 정리를 한번하고 들어가겠다. 

### 빈
- 스프링이 IoC 방식으로 관리하는 오브젝트를 말한다.
- 스프링이 직접 그 생성과 제어를 담당하는 오브젝트만을 Bean 이라고 부른다.

### 빈 팩토리
- 스프링이 IoC 를 담당하는 핵심 컨테이너
- Bean 을 등록, 생성, 조회, 반환하는 기능을 담당
- 일반적으로 BeanFactory 를 바로 사용하지 않고, ApplicationContext 를 사용한다.

### Application Context 
- BeanFactory 를 확장한 IoC Container 이다.
- Bean 을 등록하고 관리하는 기본적인 기능은 BeanFactory 와 동일한다.
- BeanFactory 라고 부를때는 주로 빈의 생성과 제어의 관점에서 이야하는 것이고, 에플리케이션 컨텍스트라고 할 때는 스프링이 제공하는 애플리케이션 지원 기능을 포함해서 이야기하는 것이라고 보면된다.

- ![스크린샷 2023-08-31 오전 11 19 18](https://github.com/rlaxoehd4234/rlaxoehd4234.github.io/assets/92311926/b8390eb6-81c3-472b-aaf8-b88a8cf19278)

위의 내용을 정리한 그림이다. 이해해보도록 하자. 


그렇다면 이렇게 IoC container 에 등록된 아이들은 어떻게 관리될까? 

그렇다. 예상했듯이 싱글톤으로 관리 되는 싱글톤 빈이 된다. 그러므로, 모든 빈의 인스턴스 주소는 동일하다는 것을 알 수 있다. 



![스크린샷 2023-08-31 오후 2 23 30](https://github.com/rlaxoehd4234/rlaxoehd4234.github.io/assets/92311926/588d7649-5e36-4706-9c04-12369b58236a)

스프링 빈을 등록하는 방법은 여러가지가 있다. 

그러나 위 그림 처럼 스프링에서는 BeanDefinition 의 추상화된 클래스의 정보만 알면된다! 

신기하지 않은가?! 


이제 AOP 대해서 설명해보려고 한다. 
AOP 란 무엇인가? Asepct Oriented Programming 이다. 
객체지향프로그램의 뒤를 이은 또 하나의 프로그래밍언어 구조이다. 
관점 지향의 중요한 개념은 횡단 관점의 분리이다 


![스크린샷 2023-08-31 오후 3 53 44](https://github.com/rlaxoehd4234/rlaxoehd4234.github.io/assets/92311926/f81e1a05-ddd1-48ec-9a30-eb5e4f6f8198)

횡단 관심을 분리해서 빈으로 등록하는 것이다. 

공통 기능 코드를 빈으로 만들어 핵심로직에서 필요로 할때 주입해주는 것이다. (주입 자체는 런타임시에 되기는 함. 내부에서 프록시에 다라 다르게 작동합니다.)

AOP 에는 3가지의 용어가 존재합니다.

Target 
- 핵심기능을 담고 있는 모듈로 타겟은 부가기능을 부여할 대상이다.
Advice
- 어느 시점에 어떤 공통 관심 기능을 적용할지 정의한 것이다.
- 타겟에 제공할 부가기능을 담고 있는 모듈이다.
joinPoint
- Aspect가 적용될 수 있는 지점
- 즉 타겟 객체가 구현한 인터페이스의 모든 method 는 joinPoint 가 됩니다.
PointCut
- 공통 관심 사항이 적용될 joinPoint 이다.
- Advice를 적용할 타겟의 method를 선별하는 정규표현식이다.
    



