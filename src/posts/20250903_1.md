---
title: "운영체제 동기화 기법: Mutex, Semaphore, Spinlock"
date: "2025-09-03"
author: "김태동"
image: "https://tse3.mm.bing.net/th/id/OIP.8kDaPEp4gRyfM0GmI3AQYwHaEK?pid=Api"
description: "멀티스레드 환경에서의 동기화 기법과 락의 원리"
---

# 운영체제 동기화 기법: Mutex, Semaphore, Spinlock

![동기화 락 개념 이미지](https://tse3.mm.bing.net/th/id/OIP.8kDaPEp4gRyfM0GmI3AQYwHaEK?pid=Api)

---

## 0. 왜 동기화가 필요한가?

멀티스레드 환경에서 여러 스레드가 동시에 **공유 자원(메모리, 파일, 소켓 등)**에 접근하면 **경쟁 상태(Race Condition)**가 발생합니다.  
이를 방지하기 위해 스레드 간의 접근을 조율하는 장치가 필요하며, 이를 **동기화(synchronization)**라고 부릅니다.  

대표적인 동기화 기법은 **Mutex, Semaphore, Spinlock**입니다.  

---

## 1. Mutex (Mutual Exclusion)

- **의미**: 상호 배제. 한 번에 단 하나의 스레드만 임계 구역(critical section)에 들어갈 수 있음.  
- **구현 방식**:  
  - 스레드가 락을 획득(`lock`)하면 다른 스레드는 대기.  
  - 자원을 다 사용한 뒤 락을 해제(`unlock`)해야 다른 스레드가 접근 가능.  
- **운영체제 지원**: 커널 수준에서 관리되며, 보통 스레드가 락을 기다릴 때는 **block 상태**로 전환됩니다.  
- **사용 예시**: 파일 쓰기, DB 업데이트 등 원자성을 보장해야 하는 연산.

---

## 2. Semaphore

- **의미**: 제한된 수의 스레드만 임계 구역에 접근하도록 허용하는 **카운터 기반 동기화 장치**.  
- **종류**:  
  - Binary Semaphore (0/1만 가능, Mutex와 유사)  
  - Counting Semaphore (N개까지 동시 접근 가능)  
- **구현 방식**:  
  - 세마포어 값이 0보다 크면 스레드가 접근하면서 값을 감소.  
  - 값이 0이면 다른 스레드는 대기.  
- **사용 예시**: DB 커넥션 풀, 네트워크 연결 제한, 쓰레드 풀 관리.

---

## 3. Spinlock

- **의미**: 스레드가 락을 얻을 때까지 **CPU를 계속 점유하면서 반복 확인(spin)**하는 방식.  
- **특징**:  
  - 블록되지 않고 **busy-waiting**을 수행.  
  - 짧은 임계 구역에서 효과적 (락을 오래 잡지 않을 때).  
  - CPU 코어를 낭비하므로 긴 대기에는 부적합.  
- **사용 예시**: 커널 내부의 짧은 코드 보호, 고성능 멀티코어 환경.

---

## 4. 동기화 락(Synchronization Locks)과의 관계

이 세 가지는 모두 **공유 자원 접근을 제어하기 위한 락(lock) 메커니즘**입니다.  
- **Mutex**: 단일 스레드만 접근 가능 → **배타적 락**.  
- **Semaphore**: N개의 스레드 접근 가능 → **제한적 동시성 락**.  
- **Spinlock**: 대기 중에도 CPU를 점유 → **바쁜 대기 기반 락**.  

### 비교표

| 구분        | Mutex                          | Semaphore                       | Spinlock                        |
|-------------|-------------------------------|---------------------------------|---------------------------------|
| 접근 가능 수 | 1개 스레드                     | N개 스레드                      | 1개 스레드                      |
| 대기 방식   | 대기 스레드는 Block 상태 전환   | 대기 스레드는 Block 상태 전환   | Busy-waiting (CPU 점유)         |
| 효율성      | 일반적인 동기화에 적합         | 리소스 개수 제한 상황에 적합     | 짧은 임계 구역, 커널 내부에 적합 |
| 사용 예시   | 파일 쓰기, DB 업데이트         | DB 커넥션 풀, 스레드 풀          | 커널 락, 드라이버 코드           |

---

## 5. 핵심 정리

- **Mutex**: “한 번에 하나만 들어올 수 있다.”  
- **Semaphore**: “최대 N명까지만 들어올 수 있다.”  
- **Spinlock**: “문 열릴 때까지 문 앞에서 서성인다(CPU 점유).”  

세 기법은 모두 **동기화 락의 하위 개념**으로, 상황에 맞는 선택이 중요합니다.  
짧고 빈번한 동기화 → Spinlock, 단일 자원 보호 → Mutex, 제한된 자원 관리 → Semaphore.  

---

## 결론

멀티스레드 환경에서의 성능과 안정성은 **동기화 방식의 선택**에 달려 있습니다.  
- Mutex는 가장 단순하고 보편적,  
- Semaphore는 자원 개수를 제어할 때,  
- Spinlock은 고성능 환경에서 짧은 락 보장에 강점이 있습니다.  

운영체제와 서버 백엔드 프레임워크 모두에서 이 개념들을 이해하고 적절히 활용하는 것이 고성능 안정적 시스템을 만드는 열쇠입니다.
